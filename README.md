# 안양시배드민턴연합회 장년부 회원관리시스템

## 📋 프로젝트 개요
- **프로젝트명**: 안양시배드민턴연합회 장년부 회원관리시스템
- **목적**: 200명 규모의 배드민턴 장년부 회원, 일정, 출석, 재고, 게시판을 종합 관리
- **기술스택**: Hono + TypeScript + Cloudflare D1 Database + TailwindCSS
- **반응형**: PC 및 모바일 완벽 지원

## 🚀 실행 중인 서비스

### 로컬 개발 환경
- **서비스 URL**: https://3000-iz510b81gxcvxi7joycyh-82b888ba.sandbox.novita.ai
- **기본 계정**: 
  - 아이디: `admin`
  - 비밀번호: `admin1234`

## ✨ 주요 기능

### 1️⃣ 회원관리
- ✅ 회원 개별 등록 및 수정
- ✅ **엑셀/CSV 일괄 업로드 (2가지 방식 지원)**
  - 방식 1: 복사-붙여넣기 (엑셀에서 직접 복사)
  - 방식 2: CSV 파일 업로드 (파일 선택 또는 드래그앤드롭)
  - 샘플 CSV 파일 다운로드 제공
- ✅ 회원 검색 및 필터링 (이름, 클럽, 급수, 회비납부 여부)
- ✅ 회원 정보 엑셀 내보내기
- ✅ 회비 납부 관리 및 내역 기록
- ✅ **전체 회원 삭제 기능 (안전 확인 절차 포함)**
  - 확인 문구 입력 필수
  - 삭제 영향 경고 표시
  - 되돌릴 수 없는 작업 재확인
- **회원 구성항목**: 이름, 성별, 출생년도, 가입클럽, 급수(S/A/B/C/D), 연락처, 회비납부여부, 차량등록여부

### 2️⃣ 일정관리
- ✅ 정기모임 자동 생성 (매달 1주째, 3주째 토요일)
  - 1주째: 정기모임 (17:00-20:00, 비산노인복지회관 5층)
  - 3주째: 특별모임 (17:00-20:00, 비산노인복지회관 5층)
- ✅ 개별 일정 추가/수정/삭제
- ✅ 월별 일정 조회
- ✅ 일정 유형별 분류 (정기모임, 특별모임, 기타)

### 3️⃣ 출석관리
- ✅ 일정별 출석 체크 (출석/결석)
- ✅ 회원별 출석 현황 조회
- ✅ 출석률 통계 및 분석
- ✅ 최다 출석 회원 TOP 20 랭킹
- ✅ 회원 검색하여 개인별 출석 현황 확인
- ✅ 연말 시상식용 출석 통계 제공

### 4️⃣ 재고관리
- ✅ 비품 재고 관리 (셔틀콕, 양말, 수건, 음료수, 종이컵, 커피, 명찰여분, 포스트잇 등)
- ✅ 입고/출고 처리 및 내역 기록
- ✅ 재고 부족 알림 기능
- ✅ 최소 필요 수량 설정 및 경고

### 5️⃣ 게시판 관리
- ✅ 다중 게시판 생성 및 관리
- ✅ 게시글 작성/수정/삭제
- ✅ **파일 첨부 기능 (이미지, PDF, 문서)**
- ✅ 공지사항 고정 기능
- ✅ 조회수 자동 집계
- ✅ 기본 게시판: 공지사항, 자유게시판, 사진첩
- ✅ **첨부파일 다운로드 및 미리보기**

### 6️⃣ 대시보드
- ✅ 전체 현황 한눈에 보기
  - 전체 회원 수 및 회비 납부 현황
  - 다가오는 일정
  - 전체 출석률
  - 재고 부족 알림
- ✅ 급수별 회원 분포 차트
- ✅ 최다 출석 회원 TOP 5
- ✅ 최근 일정 3개
- ✅ 재고 부족 품목 실시간 알림

### 7️⃣ 관리자 인증
- ✅ 로그인/로그아웃 기능
- ✅ 세션 기반 인증 관리
- ✅ 임원진 전용 접근 제어

## 🎯 추가 구현된 기능

1. **회비 미납자 필터링**: 회비 미납 회원 한 번에 확인
2. **실시간 출석 랭킹**: 시상식 대비 출석 순위 실시간 확인
3. **재고 임계값 알림**: 설정한 최소 수량 이하 시 자동 경고
4. **모바일 최적화**: 반응형 디자인으로 모바일에서도 완벽 사용
5. **엑셀 내보내기**: 회원 데이터 CSV 형식으로 다운로드

## 📊 데이터 모델

### 데이터베이스 구조
- **회원(members)**: 회원 기본 정보
- **회비납부내역(fee_payments)**: 회비 납부 이력
- **일정(schedules)**: 모임 일정 정보
- **출석(attendances)**: 일정별 회원 출석 기록
- **재고(inventory)**: 비품 재고 현황
- **재고입출고(inventory_logs)**: 재고 입출고 내역
- **게시판(boards)**: 게시판 메타 정보
- **게시글(posts)**: 게시판 게시글
- **첨부파일(attachments)**: 게시글 첨부파일 정보 (R2 키 참조)
- **관리자(admins)**: 관리자 계정

### 저장 서비스
- **Cloudflare D1**: SQLite 기반 관계형 데이터베이스
  - 로컬 개발: `.wrangler/state/v3/d1` (자동 생성)
  - 프로덕션: Cloudflare D1 Database
- **Cloudflare R2**: S3 호환 객체 스토리지 (파일 첨부용)
  - 로컬 개발: `.wrangler/state/v3/r2` (자동 생성)
  - 프로덕션: Cloudflare R2 Bucket
  - 지원 파일: 이미지(JPG, PNG, GIF, WebP), PDF, Word, Excel
  - 최대 파일 크기: 10MB

## 🖥️ 사용 가이드

### 1. 로그인
1. 메인 페이지 접속
2. 아이디: `admin`, 비밀번호: `admin1234` 입력
3. 로그인 버튼 클릭

### 2. 회원 등록
**개별 등록**:
1. 회원관리 메뉴 클릭
2. "회원 등록" 버튼 클릭
3. 회원 정보 입력 후 등록

**일괄 업로드**:
1. 엑셀에서 회원 데이터 복사 (탭으로 구분)
2. "일괄 업로드" 버튼 클릭
3. 데이터 붙여넣기 후 업로드

### 3. 정기모임 생성
1. 일정관리 메뉴 클릭
2. "정기모임 생성" 버튼 클릭
3. 년도 선택 및 월 체크
4. "생성" 버튼으로 자동 생성

### 4. 출석 체크
1. 출석관리 메뉴 클릭
2. 좌측에서 일정 선택
3. 회원별로 "출석" 또는 "결석" 버튼 클릭
4. "통계 보기"로 출석 순위 확인

### 5. 재고 관리
1. 재고관리 메뉴 클릭
2. 각 재고 카드에서 "입고" 또는 "출고" 버튼
3. 수량 입력 후 처리
4. 재고 부족 항목은 빨간색 테두리로 표시

### 6. 게시판 사용
1. 게시판 메뉴 클릭
2. 게시판 선택 후 "게시글 보기"
3. "글쓰기" 버튼으로 게시글 작성
4. **파일 첨부**: "파일 선택" 버튼으로 이미지/문서 업로드 (최대 10MB)
5. 공지사항 체크박스로 상단 고정 가능
6. 게시글 조회 시 첨부파일 다운로드 가능

## 🚀 배포 정보

### 현재 상태
- ✅ 로컬 개발 환경 실행 중
- ✅ 모든 기능 정상 작동
- ⏳ Cloudflare Pages 프로덕션 배포 준비 완료

### 로컬 실행 방법
```bash
# 데이터베이스 마이그레이션
npm run db:migrate:local

# 빌드
npm run build

# PM2로 서비스 시작
pm2 start ecosystem.config.cjs

# 또는 직접 실행
npm run dev:sandbox
```

### 프로덕션 배포 방법
```bash
# Cloudflare API 키 설정 후
npm run db:migrate:prod  # 프로덕션 DB 마이그레이션
npm run deploy:prod      # Cloudflare Pages 배포
```

## 📱 화면 구성

### 대시보드
- 4개 통계 카드 (회원, 일정, 출석률, 재고)
- 급수별 회원 분포 차트
- 최다 출석 회원 TOP 5
- 다가오는 일정 3개
- 재고 부족 알림

### 회원관리
- 검색 및 필터링 (이름, 클럽, 급수, 회비)
- 회원 목록 테이블
- 개별 등록/수정/삭제
- 일괄 업로드
- 엑셀 내보내기

### 일정관리
- 월별 일정 조회
- 일정 카드 뷰
- 개별 일정 추가/수정/삭제
- 정기모임 자동 생성

### 출석관리
- 좌측: 일정 목록
- 우측: 회원별 출석 체크
- 회원 검색 기능
- 통계 모달 (TOP 20 랭킹)

### 재고관리
- 재고 카드 그리드
- 입고/출고 버튼
- 입출고 내역 조회
- 재고 부족 알림 (빨간 테두리)

### 게시판
- 게시판 카드 목록
- 게시글 목록 (공지사항 상단 고정)
- 게시글 작성/수정/삭제
- 조회수 자동 집계

## 🔧 기술 세부사항

### 백엔드
- **프레임워크**: Hono v4 (경량 웹 프레임워크)
- **데이터베이스**: Cloudflare D1 (SQLite)
- **API**: RESTful API 설계
- **인증**: 세션 기반 인증

### 프론트엔드
- **스타일**: TailwindCSS (CDN)
- **아이콘**: Font Awesome
- **차트**: Chart.js
- **HTTP 클라이언트**: Axios
- **날짜 라이브러리**: Day.js (한국어 로케일)

### 배포
- **플랫폼**: Cloudflare Pages
- **빌드 도구**: Vite
- **개발 서버**: Wrangler Pages Dev (PM2 관리)

## 📝 최근 업데이트 (2026-01-30)

### 완료된 기능
✅ 회원관리 (CRUD, 일괄업로드, 엑셀 내보내기, 회비관리)
✅ 일정관리 (정기모임 자동생성, CRUD)
✅ 출석관리 (출석체크, 통계, TOP 20 랭킹)
✅ 재고관리 (입출고, 재고 부족 알림)
✅ 게시판 (다중 게시판, CRUD, **파일 첨부 기능**)
✅ **파일 업로드/다운로드** (Cloudflare R2 사용)
✅ 대시보드 (전체 통계, 차트, 알림)
✅ 관리자 인증 (로그인/로그아웃)
✅ 모바일 반응형 디자인

### 파일 첨부 기능 상세
- **지원 파일**: 이미지 (JPG, PNG, GIF, WebP), PDF, Word, Excel
- **최대 크기**: 10MB
- **다중 파일**: 한 게시글에 여러 파일 첨부 가능
- **저장소**: Cloudflare R2 (S3 호환)
- **미리보기**: 파일 타입별 아이콘 표시
- **다운로드**: 원본 파일명으로 다운로드

### 테스트 데이터
- 15명의 테스트 회원
- 5개의 일정 (2026년 1-2월)
- 출석 데이터 (30건)
- 재고 8개 품목
- 게시판 3개 (공지사항, 자유게시판, 사진첩)

## 🎯 향후 개선 사항
- [ ] 회원 사진 업로드 기능
- [ ] 회비 자동 알림 기능
- [ ] 월별/년도별 통계 리포트 생성
- [x] ~~게시판 이미지 첨부 기능~~ ✅ 완료
- [x] ~~게시판 파일 첨부 기능~~ ✅ 완료
- [ ] 회원 프로필 상세 페이지
- [ ] 엑셀 템플릿 다운로드 기능

## 📞 기술 지원
- **제작**: AI Developer (Claude)
- **제작일**: 2026년 1월 30일
- **버전**: 1.0.0

---

**프로는 프로답게 완성했습니다! 🔥**
